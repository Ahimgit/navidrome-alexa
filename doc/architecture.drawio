<mxfile modified="2024-02-22T01:03:27.862Z" host="drawio-plugin" agent="5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/111.0.0.0 Safari/537.36" etag="OPbsam2tsD0WivGAVJyU" version="20.5.3" type="embed"><diagram id="Ht1M8jgEwFfnCIfOTk4-" name="Page-1"><mxGraphModel dx="2684" dy="802" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" background="#FFFFFF" math="0" shadow="0"><root><mxCell id="0"/><mxCell id="1" parent="0"/><mxCell id="tBZL6QN6U2BLabLPCixm-199" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#EAEDED;fontSize=22;fontColor=#FFFFFF;strokeColor=none;labelBackgroundColor=none;" parent="1" vertex="1"><mxGeometry x="-1159.5" y="10" width="309.5" height="210" as="geometry"/></mxCell><mxCell id="-QjtrjUzRDEMRZ5MF8oH-14" value="Self-Hosted" style="whiteSpace=wrap;html=1;fillColor=none;fontSize=14;fontColor=#000000;dashed=0;fontStyle=0;align=center;verticalAlign=top;strokeColor=#D86613;gradientColor=none;spacingLeft=0;labelPosition=center;verticalLabelPosition=bottom;container=1;pointerEvents=0;collapsible=0;recursiveResize=0;" parent="1" vertex="1"><mxGeometry x="-695.5" y="240" width="780" height="450" as="geometry"/></mxCell><mxCell id="tBZL6QN6U2BLabLPCixm-11" value="navidrome-alexa" style="rounded=1;whiteSpace=wrap;html=1;glass=0;strokeWidth=2;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="-QjtrjUzRDEMRZ5MF8oH-14" vertex="1"><mxGeometry x="495" y="50" width="225" height="154.5" as="geometry"/></mxCell><mxCell id="tBZL6QN6U2BLabLPCixm-8" value="/skill" style="rounded=1;whiteSpace=wrap;html=1;" parent="-QjtrjUzRDEMRZ5MF8oH-14" vertex="1"><mxGeometry x="455" y="70" width="80" height="25.5" as="geometry"/></mxCell><mxCell id="tBZL6QN6U2BLabLPCixm-54" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fillColor=#f5f5f5;strokeColor=#666666;dashed=1;" parent="-QjtrjUzRDEMRZ5MF8oH-14" source="tBZL6QN6U2BLabLPCixm-12" target="tBZL6QN6U2BLabLPCixm-52" edge="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="556" y="127"/><mxPoint x="556" y="83"/></Array></mxGeometry></mxCell><mxCell id="tBZL6QN6U2BLabLPCixm-12" value="/api" style="rounded=1;whiteSpace=wrap;html=1;" parent="-QjtrjUzRDEMRZ5MF8oH-14" vertex="1"><mxGeometry x="455" y="114.5" width="80" height="25.5" as="geometry"/></mxCell><mxCell id="tBZL6QN6U2BLabLPCixm-22" value="/proxy" style="rounded=1;whiteSpace=wrap;html=1;" parent="-QjtrjUzRDEMRZ5MF8oH-14" vertex="1"><mxGeometry x="455" y="160" width="100" height="25.5" as="geometry"/></mxCell><mxCell id="tBZL6QN6U2BLabLPCixm-26" value="navidrome" style="rounded=1;whiteSpace=wrap;html=1;glass=0;strokeWidth=2;" parent="-QjtrjUzRDEMRZ5MF8oH-14" vertex="1"><mxGeometry x="495" y="250" width="225" height="150" as="geometry"/></mxCell><mxCell id="tBZL6QN6U2BLabLPCixm-30" value="reverse proxy&lt;br&gt;(caddy)" style="rounded=1;whiteSpace=wrap;html=1;glass=0;strokeWidth=2;" parent="-QjtrjUzRDEMRZ5MF8oH-14" vertex="1"><mxGeometry x="110" y="124" width="180" height="160" as="geometry"/></mxCell><mxCell id="tBZL6QN6U2BLabLPCixm-31" value="/static/js/main.js" style="rounded=1;whiteSpace=wrap;html=1;" parent="-QjtrjUzRDEMRZ5MF8oH-14" vertex="1"><mxGeometry x="455" y="260" width="90" height="30" as="geometry"/></mxCell><mxCell id="tBZL6QN6U2BLabLPCixm-79" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.25;entryDx=0;entryDy=0;exitX=0;exitY=0.25;exitDx=0;exitDy=0;fillColor=#f5f5f5;strokeColor=#666666;dashed=1;" parent="-QjtrjUzRDEMRZ5MF8oH-14" source="tBZL6QN6U2BLabLPCixm-32" target="tBZL6QN6U2BLabLPCixm-22" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="tBZL6QN6U2BLabLPCixm-32" value="widget.js" style="rounded=1;whiteSpace=wrap;html=1;dashed=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="-QjtrjUzRDEMRZ5MF8oH-14" vertex="1"><mxGeometry x="594" y="160" width="100" height="25.5" as="geometry"/></mxCell><mxCell id="tBZL6QN6U2BLabLPCixm-34" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;fillColor=#f5f5f5;strokeColor=#666666;" parent="-QjtrjUzRDEMRZ5MF8oH-14" source="tBZL6QN6U2BLabLPCixm-31" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="555" y="180" as="targetPoint"/><Array as="points"><mxPoint x="435" y="275"/><mxPoint x="435" y="230"/><mxPoint x="575" y="230"/><mxPoint x="575" y="180"/></Array></mxGeometry></mxCell><mxCell id="k3EkKwX_AJkbdst1bB9C-1" value="main.js" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="tBZL6QN6U2BLabLPCixm-34" vertex="1" connectable="0"><mxGeometry x="-0.1764" y="1" relative="1" as="geometry"><mxPoint x="43" y="-10" as="offset"/></mxGeometry></mxCell><mxCell id="tBZL6QN6U2BLabLPCixm-42" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;fillColor=#f5f5f5;strokeColor=#666666;entryX=0.995;entryY=0.884;entryDx=0;entryDy=0;entryPerimeter=0;" parent="-QjtrjUzRDEMRZ5MF8oH-14" source="tBZL6QN6U2BLabLPCixm-35" target="tBZL6QN6U2BLabLPCixm-30" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="290" y="253" as="targetPoint"/><Array as="points"><mxPoint x="326" y="325"/><mxPoint x="326" y="265"/><mxPoint x="310" y="265"/></Array></mxGeometry></mxCell><mxCell id="tBZL6QN6U2BLabLPCixm-35" value="other UI &amp;amp; APIs" style="rounded=1;whiteSpace=wrap;html=1;" parent="-QjtrjUzRDEMRZ5MF8oH-14" vertex="1"><mxGeometry x="455" y="310" width="90" height="30" as="geometry"/></mxCell><mxCell id="tBZL6QN6U2BLabLPCixm-39" value="navi.domain.com" style="rounded=1;whiteSpace=wrap;html=1;" parent="-QjtrjUzRDEMRZ5MF8oH-14" vertex="1"><mxGeometry x="50" y="230" width="110" height="30" as="geometry"/></mxCell><mxCell id="tBZL6QN6U2BLabLPCixm-40" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;fillColor=#f5f5f5;strokeColor=#666666;" parent="-QjtrjUzRDEMRZ5MF8oH-14" source="tBZL6QN6U2BLabLPCixm-22" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="292" y="238" as="targetPoint"/><Array as="points"><mxPoint x="390" y="173"/><mxPoint x="390" y="190"/><mxPoint x="320" y="190"/><mxPoint x="320" y="238"/></Array></mxGeometry></mxCell><mxCell id="tBZL6QN6U2BLabLPCixm-56" value="widget.js + main.js&lt;br&gt;&lt;div&gt;injects widget&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="tBZL6QN6U2BLabLPCixm-40" vertex="1" connectable="0"><mxGeometry x="-0.2672" y="-1" relative="1" as="geometry"><mxPoint x="-19" y="21" as="offset"/></mxGeometry></mxCell><mxCell id="tBZL6QN6U2BLabLPCixm-48" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fillColor=#f5f5f5;strokeColor=#666666;" parent="-QjtrjUzRDEMRZ5MF8oH-14" source="tBZL6QN6U2BLabLPCixm-30" target="tBZL6QN6U2BLabLPCixm-12" edge="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="350" y="170"/><mxPoint x="350" y="127"/></Array></mxGeometry></mxCell><mxCell id="tBZL6QN6U2BLabLPCixm-49" value="/api/queue&lt;br&gt;/api/play&lt;br&gt;/api/stop&lt;br&gt;..." style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="tBZL6QN6U2BLabLPCixm-48" vertex="1" connectable="0"><mxGeometry x="0.3087" relative="1" as="geometry"><mxPoint x="-477" y="58" as="offset"/></mxGeometry></mxCell><mxCell id="tBZL6QN6U2BLabLPCixm-45" value="alexa.domain.com" style="rounded=1;whiteSpace=wrap;html=1;" parent="-QjtrjUzRDEMRZ5MF8oH-14" vertex="1"><mxGeometry x="50" y="150" width="110" height="30" as="geometry"/></mxCell><mxCell id="tBZL6QN6U2BLabLPCixm-52" value="AlexaClient" style="rounded=1;whiteSpace=wrap;html=1;dashed=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="-QjtrjUzRDEMRZ5MF8oH-14" vertex="1"><mxGeometry x="614" y="70" width="80" height="25.5" as="geometry"/></mxCell><mxCell id="29" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;endArrow=none;endFill=0;" parent="-QjtrjUzRDEMRZ5MF8oH-14" source="tBZL6QN6U2BLabLPCixm-69" target="tBZL6QN6U2BLabLPCixm-30" edge="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="326" y="375"/><mxPoint x="326" y="265"/></Array></mxGeometry></mxCell><mxCell id="tBZL6QN6U2BLabLPCixm-69" value="/rest/stream" style="rounded=1;whiteSpace=wrap;html=1;" parent="-QjtrjUzRDEMRZ5MF8oH-14" vertex="1"><mxGeometry x="455" y="360" width="90" height="30" as="geometry"/></mxCell><mxCell id="tBZL6QN6U2BLabLPCixm-61" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fillColor=#f5f5f5;strokeColor=#666666;" parent="-QjtrjUzRDEMRZ5MF8oH-14" source="tBZL6QN6U2BLabLPCixm-30" target="tBZL6QN6U2BLabLPCixm-8" edge="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="330" y="158"/><mxPoint x="330" y="83"/></Array></mxGeometry></mxCell><mxCell id="tBZL6QN6U2BLabLPCixm-66" value="&lt;div align=&quot;left&quot;&gt;sends Resume(Play)/Stop/Next/Prev Intents&lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;gets back AudioPlayerDirective with stream url&lt;br&gt;&lt;/div&gt;" style="edgeLabel;html=1;align=left;verticalAlign=middle;resizable=0;points=[];" parent="tBZL6QN6U2BLabLPCixm-61" vertex="1" connectable="0"><mxGeometry x="-0.2037" relative="1" as="geometry"><mxPoint x="-404" y="-160" as="offset"/></mxGeometry></mxCell><mxCell id="tBZL6QN6U2BLabLPCixm-83" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;fillColor=#f5f5f5;strokeColor=#666666;dashed=1;" parent="-QjtrjUzRDEMRZ5MF8oH-14" source="tBZL6QN6U2BLabLPCixm-81" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="160" y="240" as="targetPoint"/><Array as="points"><mxPoint x="160" y="240"/></Array></mxGeometry></mxCell><mxCell id="tBZL6QN6U2BLabLPCixm-81" value="rewrite rule" style="rounded=1;whiteSpace=wrap;html=1;dashed=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="-QjtrjUzRDEMRZ5MF8oH-14" vertex="1"><mxGeometry x="190" y="230" width="80" height="20" as="geometry"/></mxCell><mxCell id="tBZL6QN6U2BLabLPCixm-82" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=1.011;entryY=0.712;entryDx=0;entryDy=0;entryPerimeter=0;startArrow=none;startFill=0;endArrow=none;endFill=0;fillColor=#f5f5f5;strokeColor=#666666;dashed=1;" parent="-QjtrjUzRDEMRZ5MF8oH-14" source="tBZL6QN6U2BLabLPCixm-81" target="tBZL6QN6U2BLabLPCixm-30" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="tBZL6QN6U2BLabLPCixm-84" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=0.995;entryY=0.888;entryDx=0;entryDy=0;entryPerimeter=0;fillColor=#f5f5f5;strokeColor=#666666;dashed=1;startArrow=classic;startFill=1;endArrow=none;endFill=0;" parent="-QjtrjUzRDEMRZ5MF8oH-14" source="tBZL6QN6U2BLabLPCixm-39" target="tBZL6QN6U2BLabLPCixm-30" edge="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="180" y="253"/><mxPoint x="180" y="266"/></Array></mxGeometry></mxCell><mxCell id="tBZL6QN6U2BLabLPCixm-85" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;dashed=1;fillColor=#f5f5f5;strokeColor=#666666;endArrow=none;endFill=0;" parent="-QjtrjUzRDEMRZ5MF8oH-14" source="tBZL6QN6U2BLabLPCixm-45" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="290" y="158" as="targetPoint"/><Array as="points"><mxPoint x="180" y="158"/><mxPoint x="290" y="158"/></Array></mxGeometry></mxCell><mxCell id="tBZL6QN6U2BLabLPCixm-86" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;dashed=1;fillColor=#f5f5f5;strokeColor=#666666;endArrow=none;endFill=0;entryX=0.996;entryY=0.29;entryDx=0;entryDy=0;entryPerimeter=0;" parent="-QjtrjUzRDEMRZ5MF8oH-14" target="tBZL6QN6U2BLabLPCixm-30" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="160" y="172.58000000000004" as="sourcePoint"/><mxPoint x="290" y="172.58000000000004" as="targetPoint"/><Array as="points"><mxPoint x="160" y="170"/></Array></mxGeometry></mxCell><mxCell id="-QjtrjUzRDEMRZ5MF8oH-29" value="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#007CBD;strokeColor=none;fontColor=#FFFFFF;fontStyle=1;fontSize=22;" parent="-QjtrjUzRDEMRZ5MF8oH-14" vertex="1"><mxGeometry x="15.5" y="206" width="21" height="24" as="geometry"/></mxCell><mxCell id="7OVz4w7n9kzEPWy-4BBC-3" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#EAEDED;fontSize=22;fontColor=#FFFFFF;strokeColor=none;labelBackgroundColor=none;" parent="1" vertex="1"><mxGeometry x="-1011" y="725" width="942.25" height="275" as="geometry"/></mxCell><mxCell id="7OVz4w7n9kzEPWy-4BBC-4" value="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#007CBD;strokeColor=none;fontColor=#FFFFFF;fontStyle=1;fontSize=22;labelBackgroundColor=none;" parent="1" vertex="1"><mxGeometry x="-998.75" y="752" width="40" height="38" as="geometry"/></mxCell><mxCell id="7OVz4w7n9kzEPWy-4BBC-5" value="2" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#007CBD;strokeColor=none;fontColor=#FFFFFF;fontStyle=1;fontSize=22;labelBackgroundColor=none;" parent="1" vertex="1"><mxGeometry x="-998.75" y="839.5" width="40" height="38" as="geometry"/></mxCell><mxCell id="7OVz4w7n9kzEPWy-4BBC-6" value="3" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#007CBD;strokeColor=none;fontColor=#FFFFFF;fontStyle=1;fontSize=22;labelBackgroundColor=none;" parent="1" vertex="1"><mxGeometry x="-998.75" y="925" width="40" height="38" as="geometry"/></mxCell><mxCell id="7OVz4w7n9kzEPWy-4BBC-7" value="4" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#007CBD;strokeColor=none;fontColor=#FFFFFF;fontStyle=1;fontSize=22;labelBackgroundColor=none;" parent="1" vertex="1"><mxGeometry x="-519.25" y="756.75" width="40" height="38" as="geometry"/></mxCell><mxCell id="7OVz4w7n9kzEPWy-4BBC-8" value="5" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#007CBD;strokeColor=none;fontColor=#FFFFFF;fontStyle=1;fontSize=22;labelBackgroundColor=none;" parent="1" vertex="1"><mxGeometry x="-518.75" y="828.25" width="40" height="38" as="geometry"/></mxCell><mxCell id="7OVz4w7n9kzEPWy-4BBC-13" value="The user opens the Navidrome UI. The main.js file is rewritten by a reverse proxy to inject widget.js, which includes the navidrome-alexa (NA) UI. This combined script is then served by the NA /proxy endpoint." style="text;html=1;align=left;verticalAlign=top;spacingTop=-4;fontSize=14;labelBackgroundColor=none;whiteSpace=wrap;" parent="1" vertex="1"><mxGeometry x="-946.75" y="740.75" width="395.75" height="60.5" as="geometry"/></mxCell><mxCell id="7OVz4w7n9kzEPWy-4BBC-14" value="The user populates the play queue, selects a device, and then presses the &quot;Play&quot; button on the widget. The play queue is &lt;br&gt;sent to the /api/queue, and the /api/play command is issued via the NA REST API." style="text;html=1;align=left;verticalAlign=top;spacingTop=-4;fontSize=14;labelBackgroundColor=none;whiteSpace=wrap;" parent="1" vertex="1"><mxGeometry x="-946.75" y="823.25" width="405.75" height="57.5" as="geometry"/></mxCell><mxCell id="7OVz4w7n9kzEPWy-4BBC-15" value="NA utilizes internal Alexa APIs (recorded&amp;nbsp; from the Alexa mobile app) to issue commands to Alexa devices. This has an effect similar to what would occur if a voice command like &quot;Alexa, ask [skill name] to play&quot; were given." style="text;html=1;align=left;verticalAlign=top;spacingTop=-4;fontSize=14;labelBackgroundColor=none;whiteSpace=wrap;" parent="1" vertex="1"><mxGeometry x="-946.25" y="908" width="405.25" height="60" as="geometry"/></mxCell><mxCell id="tBZL6QN6U2BLabLPCixm-67" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fillColor=#f5f5f5;strokeColor=#666666;" parent="1" source="tBZL6QN6U2BLabLPCixm-3" target="tBZL6QN6U2BLabLPCixm-14" edge="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="-829.5" y="90"/><mxPoint x="-829.5" y="340"/></Array></mxGeometry></mxCell><mxCell id="tBZL6QN6U2BLabLPCixm-68" value="sends /rest/stream url to the selected device" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="tBZL6QN6U2BLabLPCixm-67" vertex="1" connectable="0"><mxGeometry x="0.1604" y="1" relative="1" as="geometry"><mxPoint x="155" y="-24" as="offset"/></mxGeometry></mxCell><mxCell id="tBZL6QN6U2BLabLPCixm-78" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.25;entryDx=0;entryDy=0;fillColor=#f5f5f5;strokeColor=#666666;" parent="1" source="tBZL6QN6U2BLabLPCixm-3" target="tBZL6QN6U2BLabLPCixm-45" edge="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="-505.5" y="120"/><mxPoint x="-505.5" y="210"/><mxPoint x="-735.5" y="210"/><mxPoint x="-735.5" y="398"/></Array></mxGeometry></mxCell><mxCell id="tBZL6QN6U2BLabLPCixm-70" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fillColor=#f5f5f5;strokeColor=#666666;entryX=0;entryY=0.75;entryDx=0;entryDy=0;" parent="1" source="tBZL6QN6U2BLabLPCixm-14" target="tBZL6QN6U2BLabLPCixm-39" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="-811.5" y="402.47" as="sourcePoint"/><mxPoint x="-185.5" y="677.47" as="targetPoint"/><Array as="points"><mxPoint x="-1139" y="340"/><mxPoint x="-1139" y="615"/><mxPoint x="-780" y="615"/><mxPoint x="-780" y="493"/></Array></mxGeometry></mxCell><mxCell id="tBZL6QN6U2BLabLPCixm-72" value="plays /rest/stream" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="tBZL6QN6U2BLabLPCixm-70" vertex="1" connectable="0"><mxGeometry x="-0.8191" y="1" relative="1" as="geometry"><mxPoint x="36" y="-18" as="offset"/></mxGeometry></mxCell><mxCell id="tBZL6QN6U2BLabLPCixm-14" value="Echo" style="outlineConnect=0;fontColor=#232F3E;gradientColor=none;strokeColor=#232F3E;fillColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.echo;" parent="1" vertex="1"><mxGeometry x="-919.5" y="310" width="60" height="60" as="geometry"/></mxCell><mxCell id="tBZL6QN6U2BLabLPCixm-51" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.75;entryDx=0;entryDy=0;fillColor=#f5f5f5;strokeColor=#666666;" parent="1" target="tBZL6QN6U2BLabLPCixm-45" edge="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="-741" y="460"/><mxPoint x="-741" y="413"/></Array><mxPoint x="-827" y="460" as="sourcePoint"/></mxGeometry></mxCell><mxCell id="tBZL6QN6U2BLabLPCixm-46" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.25;exitDx=0;exitDy=0;fillColor=#f5f5f5;strokeColor=#666666;" parent="1" source="tBZL6QN6U2BLabLPCixm-39" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="-827" y="478" as="targetPoint"/></mxGeometry></mxCell><mxCell id="tBZL6QN6U2BLabLPCixm-73" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fillColor=#f5f5f5;strokeColor=#666666;entryX=0;entryY=0.495;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="tBZL6QN6U2BLabLPCixm-55" target="22" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="-895.5" y="485" as="targetPoint"/></mxGeometry></mxCell><mxCell id="tBZL6QN6U2BLabLPCixm-55" value="&lt;br&gt;selects Alexa/Echo &lt;br&gt;device in the widget&lt;br&gt;and clicks &quot;Play&quot;" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;" parent="1" vertex="1"><mxGeometry x="-998.75" y="450.25" width="30" height="60" as="geometry"/></mxCell><mxCell id="tBZL6QN6U2BLabLPCixm-57" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;fillColor=#f5f5f5;strokeColor=#666666;" parent="1" source="tBZL6QN6U2BLabLPCixm-52" target="tBZL6QN6U2BLabLPCixm-17" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="-245.5" y="100" as="targetPoint"/><Array as="points"><mxPoint x="-41.5" y="110"/></Array></mxGeometry></mxCell><mxCell id="tBZL6QN6U2BLabLPCixm-58" value="&lt;div&gt;authenticates&lt;br&gt;calls internal apis to get devices &lt;br&gt;and send commands like&lt;br&gt;&quot;ask skill to play&quot;&lt;br&gt;&quot;ask skill to stop&quot;&lt;/div&gt;" style="edgeLabel;html=1;align=left;verticalAlign=middle;resizable=0;points=[];" parent="tBZL6QN6U2BLabLPCixm-57" vertex="1" connectable="0"><mxGeometry x="0.4519" y="3" relative="1" as="geometry"><mxPoint x="78" y="70" as="offset"/></mxGeometry></mxCell><mxCell id="tBZL6QN6U2BLabLPCixm-91" value="2" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#007CBD;strokeColor=none;fontColor=#FFFFFF;fontStyle=1;fontSize=22;" parent="1" vertex="1"><mxGeometry x="-735.5" y="431" width="21" height="24" as="geometry"/></mxCell><mxCell id="tBZL6QN6U2BLabLPCixm-96" value="4" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#007CBD;strokeColor=none;fontColor=#FFFFFF;fontStyle=1;fontSize=22;" parent="1" vertex="1"><mxGeometry x="-799.5" y="171" width="21" height="24" as="geometry"/></mxCell><mxCell id="tBZL6QN6U2BLabLPCixm-97" value="5" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#007CBD;strokeColor=none;fontColor=#FFFFFF;fontStyle=1;fontSize=22;" parent="1" vertex="1"><mxGeometry x="-799.5" y="54.5" width="21" height="24" as="geometry"/></mxCell><mxCell id="tBZL6QN6U2BLabLPCixm-161" value="Amazon" style="whiteSpace=wrap;html=1;fillColor=none;fontSize=14;fontColor=#000000;dashed=0;fontStyle=0;align=center;verticalAlign=top;strokeColor=#D86613;gradientColor=none;spacingLeft=0;labelPosition=center;verticalLabelPosition=bottom;container=1;pointerEvents=0;collapsible=0;recursiveResize=0;" parent="1" vertex="1"><mxGeometry x="-475.5" y="25" width="320" height="170" as="geometry"/></mxCell><mxCell id="tBZL6QN6U2BLabLPCixm-17" value="Alexa internal&lt;br&gt;APIs" style="outlineConnect=0;fontColor=#232F3E;gradientColor=none;strokeColor=#ffffff;fillColor=#232F3E;dashed=0;verticalLabelPosition=middle;verticalAlign=bottom;align=center;html=1;whiteSpace=wrap;fontSize=10;fontStyle=1;spacing=3;shape=mxgraph.aws4.productIcon;prIcon=mxgraph.aws4.ec2;" parent="tBZL6QN6U2BLabLPCixm-161" vertex="1"><mxGeometry x="190" y="30" width="78" height="116" as="geometry"/></mxCell><mxCell id="tBZL6QN6U2BLabLPCixm-3" value="&lt;div&gt;Alexa Self-Hosted&amp;nbsp;&lt;/div&gt;&lt;div&gt;Skill&lt;br&gt;&lt;/div&gt;" style="outlineConnect=0;fontColor=#232F3E;gradientColor=none;strokeColor=#232F3E;fillColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.alexa_skill;" parent="tBZL6QN6U2BLabLPCixm-161" vertex="1"><mxGeometry x="70" y="45" width="60" height="60" as="geometry"/></mxCell><mxCell id="tBZL6QN6U2BLabLPCixm-60" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fillColor=#f5f5f5;strokeColor=#666666;" parent="tBZL6QN6U2BLabLPCixm-161" source="tBZL6QN6U2BLabLPCixm-17" target="tBZL6QN6U2BLabLPCixm-3" edge="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="150" y="85"/><mxPoint x="150" y="85"/></Array></mxGeometry></mxCell><mxCell id="tBZL6QN6U2BLabLPCixm-95" value="3" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#007CBD;strokeColor=none;fontColor=#FFFFFF;fontStyle=1;fontSize=22;" parent="1" vertex="1"><mxGeometry x="-75.5" y="160" width="21" height="24" as="geometry"/></mxCell><mxCell id="tBZL6QN6U2BLabLPCixm-196" value="The Alexa APIs convert these commands into intents, which are then sent to the NA /skill API. The skill implements the &lt;br&gt;AudioPlayer interface for Alexa and essentially serves back stream URLs pointing to Navidrome's /res/stream endpoint." style="text;html=1;align=left;verticalAlign=top;spacingTop=-4;fontSize=14;labelBackgroundColor=none;whiteSpace=wrap;" parent="1" vertex="1"><mxGeometry x="-467.25" y="740.75" width="378.5" height="60" as="geometry"/></mxCell><mxCell id="tBZL6QN6U2BLabLPCixm-198" value="In turn, the Alexa APIs send those stream URLs to the selected device, which then begins playback." style="text;html=1;align=left;verticalAlign=top;spacingTop=-4;fontSize=14;labelBackgroundColor=none;whiteSpace=wrap;" parent="1" vertex="1"><mxGeometry x="-467.25" y="828.25" width="390" height="60" as="geometry"/></mxCell><mxCell id="tBZL6QN6U2BLabLPCixm-200" value="&lt;div&gt;&lt;div align=&quot;center&quot;&gt;&lt;b&gt;Summary&lt;/b&gt;&lt;/div&gt;&lt;p&gt;Navidrome Alexa is a stream-to-Alexa integration for Navidrome, consisting of:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;A JavaScript widget that injects into the Navidrome UI for playback control.&lt;/li&gt;&lt;li&gt;A REST /api to issue commands to an Alexa device.&lt;/li&gt;&lt;li&gt;An Alexa /skill implementing the AudioPlayer interface for playback.&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=top;spacingTop=-4;fontSize=14;labelBackgroundColor=none;whiteSpace=wrap;" parent="1" vertex="1"><mxGeometry x="-1150.38" y="20" width="290.38" height="90" as="geometry"/></mxCell><mxCell id="22" value="Navidrome UI&lt;br&gt;+ Widget" style="sketch=0;pointerEvents=1;shadow=0;dashed=0;html=1;strokeColor=none;fillColor=#434445;aspect=fixed;labelPosition=center;verticalLabelPosition=bottom;verticalAlign=top;align=center;outlineConnect=0;shape=mxgraph.vvd.web_browser;" parent="1" vertex="1"><mxGeometry x="-900" y="455" width="71.13" height="50.5" as="geometry"/></mxCell></root></mxGraphModel></diagram></mxfile>